{"version":3,"file":"action-create-prerelease.js","sourceRoot":"/","sources":["action-create-prerelease.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,4CAA0C;AAC1C,wDAA0C;AAC1C,uCAA2D;AAEpD,KAAK,UAAU,gBAAgB,CACpC,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAmB,EAC7C,GAAW;IAEX,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;IACrC,MAAM,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC;QAC/B,KAAK;QACL,IAAI;QACJ,GAAG,EAAE,aAAa,GAAG,EAAE;QACvB,GAAG,EAAE,OAAO,CAAC,GAAG;KACjB,CAAC,CAAC;IAEH,MAAM,UAAU,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;QACxD,KAAK;QACL,IAAI;QACJ,UAAU,EAAE,IAAI;QAChB,QAAQ,EAAE,GAAG;QACb,IAAI,EAAE,GAAG;QACT,sBAAsB,EAAE,IAAI;KAC7B,CAAC,CAAC;IAEH,MAAM,CAAC,IAAI,CAAC,uBAAuB,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACjE,CAAC;AAtBD,4CAsBC;AAED,mBAAyB,GAAW;IAClC,MAAM,OAAO,GAAG,IAAI,gBAAO,EAAE,CAAC;IAC9B,OAAO,gBAAgB,CAAC,IAAA,uBAAa,EAAC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC;AACvE,CAAC;AAHD,4BAGC","sourcesContent":["import { Octokit } from \"@octokit/action\";\nimport * as github from \"@actions/github\";\nimport { ContextArgument, createContext } from \"./context\";\n\nexport async function createPrerelease(\n  { octokit, context, logger }: ContextArgument,\n  tag: string\n) {\n  const { owner, repo } = context.repo;\n  await octokit.rest.git.createRef({\n    owner,\n    repo,\n    ref: `refs/tags/${tag}`,\n    sha: context.sha,\n  });\n\n  const newRelease = await octokit.rest.repos.createRelease({\n    owner,\n    repo,\n    prerelease: true,\n    tag_name: tag,\n    name: tag,\n    generate_release_notes: true,\n  });\n\n  logger.info(`Created prerelease: ${newRelease.data.html_url}`);\n}\n\nexport default function (tag: string) {\n  const octokit = new Octokit();\n  return createPrerelease(createContext(octokit, github.context), tag);\n}\n"]}