{"version":3,"file":"context.js","sourceRoot":"/","sources":["context.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA,oDAAsC;AAqBtC;;;;;;GAMG;AACH,SAAgB,aAAa,CAC3B,OAAsC;AACtC;;;GAGG;AACH,aAAmD;IAEnD,OAAO;QACL,OAAO;QACP,OAAO,EAAE;YACP,IAAI,EAAE,aAAa,CAAC,IAAI;YACxB,GAAG,EAAE,aAAa,CAAC,GAAG;SACvB;QACD,MAAM,EAAE;YACN,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,KAAK,EAAE,IAAI,CAAC,KAAK;SAClB;KACF,CAAC;AACJ,CAAC;AArBD,sCAqBC","sourcesContent":["import { context, getOctokit } from \"@actions/github\";\nimport * as core from \"@actions/core\";\n\n/**\n * The context exists solely to faciliate testing by inversion of control.\n *\n * It is a simple object that contains everything the action needs to run.\n *\n * Tests will need to create and/or mock the context object manually, in all\n * other cases the createContext function should be used.\n */\nexport interface ContextArgument {\n  octokit: ReturnType<typeof getOctokit>;\n  context: Pick<typeof context, \"repo\" | \"sha\">;\n  logger: {\n    debug: typeof core.debug;\n    info: typeof core.info;\n    warning: typeof core.warning;\n    error: typeof core.error;\n  };\n}\n\n/**\n * Create a context object containing everything each action needs to run.\n *\n * @param octokit The Octokit instance\n * @param githubContext The context object from the GitHub action\n * @returns Fully initialized context object\n */\nexport function createContext(\n  octokit: ReturnType<typeof getOctokit>,\n  /*\n   * A partial is used here to make mocking easier.\n   * Additonal fields can be added as needed.\n   */\n  githubContext: Pick<typeof context, \"repo\" | \"sha\">\n) {\n  return {\n    octokit,\n    context: {\n      repo: githubContext.repo,\n      sha: githubContext.sha,\n    },\n    logger: {\n      debug: core.debug,\n      info: core.info,\n      warning: core.warning,\n      error: core.error,\n    },\n  };\n}\n"]}